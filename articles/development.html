<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Development Thoughts • octomod</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Development Thoughts">
<meta property="og:description" content="octomod">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">octomod</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/development.html">Development Thoughts</a>
    </li>
    <li>
      <a href="../articles/octobeast.html">The Octobeast</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/asshah4/octomod/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="development_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Development Thoughts</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/asshah4/octomod/blob/master/vignettes/development.Rmd"><code>vignettes/development.Rmd</code></a></small>
      <div class="hidden name"><code>development.Rmd</code></div>

    </div>

    
    
<p><strong>As of May 19, 2021, this is still being <em>iterated</em>.</strong></p>
<div id="background" class="section level1">
<h1 class="hasAnchor">
<a href="#background" class="anchor"></a>Background</h1>
<p>The development of this project was inspired by the a problem of organizing many different hypotheses while writing my thesis. I had several data sets and many, many models, and had trouble with how to store and recall them. I wanted an easier way to pull my thoughts together, creating a dynamic structure that would unfold along with the research project itself.</p>
<p>The structure, <strong>which is still being iterated</strong>, is about an easy-to-understand interface that allows the following major concepts:</p>
<ol style="list-style-type: decimal">
<li>Identifying core data that will be queried with specific hypothesis</li>
<li>Ability to handle grouping/strata of that data for subsets of analyses</li>
<li>Forming hypotheses of multiple outcomes and multiple predictors with an epidemiological angle (e.g. <em>exposures</em>, <em>outcomes</em>, <em>covariates</em>)</li>
<li>Running and updating tests as the data changes</li>
<li>Extracting or recalling models as the research project progresses</li>
</ol>
<p>As minimally-experienced programmer, I used examples of current effective packages while designing the API.</p>
<table class="table">
<colgroup>
<col width="50%">
<col width="50%">
</colgroup>
<thead><tr class="header">
<th>Source</th>
<th>Descriptionn</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><a href="https://r4ds.had.co.nz/many-models.html">R4DS</a></td>
<td>This was the first time I had seen an elegant way of generating multiple models and working with list-columns, particulary the type that could become <em>tidy</em>.</td>
</tr>
<tr class="even">
<td><a href="https://modelr.tidyverse.org/">{modelr}</a></td>
<td>An example of a package that simplifies modeling in R</td>
</tr>
<tr class="odd">
<td><a href="https://github.com/smaakage85/modelgrid">{modelgrid}</a></td>
<td>A framework for creating and managing multiple models, with a focus on the {caret} package</td>
</tr>
<tr class="even">
<td><a href="https://parsnip.tidymodels.org/">{parsnip}</a></td>
<td>The core of this was based on the single interface for modeling that <code>tidymodels</code> provides and serves as a foundation for flexible model definitions</td>
</tr>
<tr class="odd">
<td><a href="https://stacks.tidymodels.org/">{stacks}</a></td>
<td>An influential concept of an API designed for binding together mutliple model definitions, however is meant for a specific formula and pulling together multiple models for blended predictions</td>
</tr>
<tr class="even">
<td><a href="https://workflowsets.tidymodels.org/index.html">{workflowsets}</a></td>
<td>This fits multiple models in a workflow to identify a potential “best” model, which is very flexible</td>
</tr>
<tr class="odd">
<td><a href="https://easystats.github.io/easystats/">{easystats}</a></td>
<td>Forms a different “universe” in parallel to the <code>tidyverse</code> for interpreting results of models, with a focus on the presentation and exploration of statistical analysis</td>
</tr>
</tbody>
</table>
<p>The features that I found missing in these was the ability to handle a variety of formulas that had specific pre-defined hypotheses, and the focus had been to <em>compare</em> or <em>combine</em> models, instead of considering the focus on causality. Essentially, I wanted a more epidemiological approach. The <em>easystats</em> archetype of R “monsters” was partially the idea for the working name of <strong>{octomod}</strong>. I started writing this after reading <a href="https://blog.simonpcouch.com/blog/dev-docs-p1/">this blogpost</a> on development of a package.</p>
</div>
<div id="on-names" class="section level1">
<h1 class="hasAnchor">
<a href="#on-names" class="anchor"></a>On Names</h1>
<p>The project name has gone through many iterations. The reason why the name was important is that the correct <em>metaphor</em> helps the planning process, providing a schema for understanding. <a href="https://en.wikipedia.org/wiki/Metaphors_We_Live_By">Metaphors We Live By</a> by Lakoff was fundamental in this understanding for me.</p>
<table class="table">
<colgroup>
<col width="50%">
<col width="50%">
</colgroup>
<thead><tr class="header">
<th>Project Name</th>
<th>Reasoning</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>{marksman}</td>
<td>The first draft included the concept of “specific aims”. This research concept is from grant writing, where the first page of a project contains the specific hypotheses that will be explored. Thus, one could <em>load</em>, <em>aim</em>, and <em>fire</em> and specific targets. The problem with this was it seemed to deterministic, as exploration was a crucial component.</td>
</tr>
<tr class="even">
<td>{octomod}</td>
<td>The second draft took inspiration from the idea of an <em>octopus</em>, with 8 arms or legs all surrounded a central idea. This allowed for flexibility in that the many arms of a project were not necessarily hierarchical. However, theming a project after a cephalopod does make the function names less easy to remember.</td>
</tr>
<tr class="odd">
<td>{aim}</td>
<td>Another consideration was to go back to the original concept of specific aims. Each project would be initialized, different study arms would be added, and then the corresponding models could be built. This seems more user-friendly in terms of nosological considerations.</td>
</tr>
</tbody>
</table>
</div>
<div id="defining-the-api" class="section level1">
<h1 class="hasAnchor">
<a href="#defining-the-api" class="anchor"></a>Defining the API</h1>
<div id="current-draft" class="section level2">
<h2 class="hasAnchor">
<a href="#current-draft" class="anchor"></a>Current Draft</h2>
<p>I’ve currently defined the basic functions as below:</p>
<ul>
<li>
<code><a href="../reference/octomod.html">octomod()</a></code> initializes the modeling structure</li>
<li>
<code><a href="../reference/core.html">core()</a></code> defines the core data of the <code>octomod</code> structure, allowing tests to be performed from a centralized data set</li>
<li>
<code><a href="../reference/arm.html">arm()</a></code> creates individual arms to the <code>octomod</code>, which reference a specific family of hypotheses</li>
<li>
<code><a href="../reference/equip.html">equip()</a></code> gives each of the arms a <em>tidied</em> output including model fit and parameters, which can subsequently be called</li>
</ul>
<p>The benefits of this are I can flexibly change the core data, give specific formulas that can be expanded/varied, fit independently, and extracted in a list-column based format.</p>
<p>The problems are that “changing” the central dataset is dangerous, the structure doesn’t hold together afterwards, and fitting the data may break older models.</p>
</div>
<div id="second-draft" class="section level2">
<h2 class="hasAnchor">
<a href="#second-draft" class="anchor"></a>Second Draft</h2>
<div id="core-functions" class="section level3">
<h3 class="hasAnchor">
<a href="#core-functions" class="anchor"></a>Core Functions</h3>
<p>As described, the name helps to determine the function’s purpose. The core functions represent the major user-facing features. They also help to identify the underlying structure needed to store the data collected.</p>
<ul>
<li>
<code><a href="../reference/project.html">project()</a></code> initializes a structure that holds and can retain information about the individual project aims or study arms</li>
<li>
<code><a href="../reference/set_data.html">set_data()</a></code> attaches a specific data frame to the <code>project</code> object</li>
<li>
<code>add_arm()</code> creates a hypothesis-driven series of tests around a formula, and allows for multiple tests to be described simultaneously (e.g. sequential addition of covariates)</li>
<li>
<code>build_models()</code> runs the tests, whether it is basic statistics or more complex inferential models, with the capacity to update only the newly added arms</li>
<li>
<code>collect_findings()</code> recalls information from the <code>project</code> structure in a flexible way</li>
</ul>
<p><strong>Defining the Structure</strong></p>
<p>There should be a core function that establishes the underlying structure. Should the data be given at this time, or added in a separate function? Initialization should likely be a list structure due to its malleability.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/project.html">project</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><strong>Data Sets</strong></p>
<p>It seems that it should be a specific, but necessary, step to add data. The data structure, hopefully <strong>tidy</strong>, would provide the parameters by column names. It may allow for creating more effective selection commands as well.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/set_data.html">set_data</a></span><span class="op">(</span>
  data <span class="op">=</span> <span class="cn">NULL</span>,
  <span class="va">...</span>
<span class="op">)</span></code></pre></div>
<p><strong>Adding Hypotheses</strong></p>
<p>This is probably the most important feature. A function such as <code>add_arm()</code> could help to stack on different potential tests.</p>
<p>The complex part of this is that each <em>arm</em> would allow for variations of a hypothesis formula. Multiple predictors, multiple outcomes. In an epidemiological sense, its important that certain predictors are maintained as <em>exposures</em>. Each hypothesis thus needs to allow flexibility for the complexity of a model formula.</p>
<ul>
<li>Unique name for each arm, to be “pulled” later on</li>
<li>A global formula or plan to be specified, and potentially varied or recombined (e.g. different “patterns” of combinations based on the testing strategy). It would be helpful to label certain variables as fixed exposures in some way as well.</li>
<li>The type of “test” that is being used. This should likely draw from a common system, such as <code>parsnip</code>, to have consistent model representations. The other aspect would be more straightforward testing, such as from the <code>stats</code> base package.</li>
<li>Subgroups of the data should be allowed to be analyzed via this as well. This is such a common pattern that it should likely be defined as a specific parameter.</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">add_arm</span><span class="op">(</span>
  title <span class="op">=</span> <span class="st">"first_example"</span>,
  description <span class="op">=</span> <span class="cn">NULL</span>,
  plan <span class="op">=</span> <span class="va">outcome</span> <span class="op">~</span> <span class="va">exposure</span> <span class="op">+</span> <span class="va">covariate</span>,
  exposure <span class="op">=</span> <span class="st">"exposure"</span>,
  pattern <span class="op">=</span> <span class="st">"parallel"</span>,
  test <span class="op">=</span> <span class="fu"><a href="https://parsnip.tidymodels.org/reference/linear_reg.html">linear_reg</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://parsnip.tidymodels.org/reference/set_engine.html">set_engine</a></span><span class="op">(</span><span class="st">"lm"</span><span class="op">)</span>,
  <span class="va">...</span>
<span class="op">)</span></code></pre></div>
<p><strong>Running Tests</strong></p>
<p>The ability to then run tests would be the next logical step. This capacity should allow for identifying if tests have already been run or not, and only run newly added components.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">build_models</span><span class="op">(</span>
  run_all <span class="op">=</span> <span class="cn">FALSE</span>,
  which_tests <span class="op">=</span> <span class="cn">NULL</span>,
  <span class="va">...</span>
<span class="op">)</span></code></pre></div>
<p><strong>Data Extraction</strong></p>
<p>The final structure of the project should be flexible in terms of extracting or pulling data. Its imagined as a list structure, and thus components could be called by the <code><a href="https://rdrr.io/r/base/Extract.html">$</a></code> operator. That depends on quality of names, and making sure they are well described.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">collect_findings</span><span class="op">(</span>
  which_tests <span class="op">=</span> <span class="cn">NULL</span>,
  <span class="va">...</span>
<span class="op">)</span></code></pre></div>
<p>This is an important and difficult process of deciding how the user should be able to visualize information and extract findings. This will end up including <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> and <code><a href="https://rdrr.io/r/base/print.html">print()</a></code> functions as well.</p>
</div>
<div id="project-structure" class="section level3">
<h3 class="hasAnchor">
<a href="#project-structure" class="anchor"></a>Project Structure</h3>
<p>The overall project structure requires a specific <em>class</em> that will contain a pattern of an internal structure. The <code>project</code> object should hold:</p>
<ul>
<li>a space to hold the data set</li>
<li>a <em>tidy</em> table that holds each <code>arm</code> as a separate row, containing columns for the title, formula combinations, modifiers/options, description, and build/run status</li>
<li>a corresponding <em>tidy</em> table that holds the results of each <code>arm</code> after it has been run</li>
</ul>
</div>
<div id="supporting-functions" class="section level3">
<h3 class="hasAnchor">
<a href="#supporting-functions" class="anchor"></a>Supporting Functions</h3>
<p>The most complex part of this is handling formulas. Each formula given has the option to be expanded in a number of patterns. Each pattern should represent an epidemiology approach to model building (e.g. each model is informative, even if it is insignificant).</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">make_formulas</span><span class="op">(</span>
  formulas <span class="op">=</span> <span class="va">y</span> <span class="op">~</span> <span class="va">x1</span> <span class="op">+</span> <span class="va">x2</span> <span class="op">+</span> <span class="va">x3</span>,
  combination <span class="op">=</span> <span class="st">"parallel"</span>,
  exposures <span class="op">=</span> <span class="cn">NULL</span>,
  <span class="va">...</span>
<span class="op">)</span></code></pre></div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Anish Shah.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
