<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Development Thoughts • dagger</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Development Thoughts">
<meta property="og:description" content="dagger">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">dagger</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/development.html">Development Thoughts</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/asshah4/dagger/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="development_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Development Thoughts</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/asshah4/dagger/blob/master/vignettes/development.Rmd"><code>vignettes/development.Rmd</code></a></small>
      <div class="hidden name"><code>development.Rmd</code></div>

    </div>

    
    
<p><strong>As of September 04, 2021, this is still being <em>iterated</em>.</strong></p>
<div id="background" class="section level1">
<h1 class="hasAnchor">
<a href="#background" class="anchor"></a>Background</h1>
<p>The development of this project was inspired by the a problem of organizing many different hypotheses while writing my thesis. I had several data sets and many, many models, and had trouble with how to store and recall them. I wanted an easier way to pull my thoughts together, creating a dynamic structure that would unfold along with the research project itself.</p>
<p>The structure, <strong>which is still being iterated</strong>, is about an easy-to-understand interface that allows the following major concepts:</p>
<ol style="list-style-type: decimal">
<li>Identifying core data that will be queried with specific hypothesis</li>
<li>Ability to handle grouping/strata of that data for subsets of analyses</li>
<li>Forming hypotheses of multiple outcomes and multiple predictors with an epidemiological angle (e.g. <em>exposures</em>, <em>outcomes</em>, <em>covariates</em>)</li>
<li>Running and updating tests as the data changes</li>
<li>Extracting or recalling models as the research project progresses</li>
</ol>
<p>As minimally-experienced programmer, I used examples of current effective packages while designing the API.</p>
<table class="table">
<colgroup>
<col width="50%">
<col width="50%">
</colgroup>
<thead><tr class="header">
<th>Source</th>
<th>Descriptionn</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><a href="https://r4ds.had.co.nz/many-models.html">R4DS</a></td>
<td>This was the first time I had seen an elegant way of generating multiple models and working with list-columns, particulary the type that could become <em>tidy</em>.</td>
</tr>
<tr class="even">
<td><a href="https://modelr.tidyverse.org/">{modelr}</a></td>
<td>An example of a package that simplifies modeling in R</td>
</tr>
<tr class="odd">
<td><a href="https://github.com/smaakage85/modelgrid">{modelgrid}</a></td>
<td>A framework for creating and managing multiple models, with a focus on the {caret} package</td>
</tr>
<tr class="even">
<td><a href="https://parsnip.tidymodels.org/">{parsnip}</a></td>
<td>The core of this was based on the single interface for modeling that <code>tidymodels</code> provides and serves as a foundation for flexible model definitions</td>
</tr>
<tr class="odd">
<td><a href="https://stacks.tidymodels.org/">{stacks}</a></td>
<td>An influential concept of an API designed for binding together mutliple model definitions, however is meant for a specific formula and pulling together multiple models for blended predictions</td>
</tr>
<tr class="even">
<td><a href="https://workflowsets.tidymodels.org/index.html">{workflowsets}</a></td>
<td>This fits multiple models in a workflow to identify a potential “best” model, which is very flexible</td>
</tr>
<tr class="odd">
<td><a href="https://easystats.github.io/easystats/">{easystats}</a></td>
<td>Forms a different “universe” in parallel to the <code>tidyverse</code> for interpreting results of models, with a focus on the presentation and exploration of statistical analysis</td>
</tr>
<tr class="even">
<td><a href="https://ggdag.malco.io/">{ggdag}</a></td>
<td>A <em>tidy</em> approach to creating directed acyclic graphs</td>
</tr>
</tbody>
</table>
<p>The features that I found missing in these was the ability to handle a variety of formulas that had specific pre-defined hypotheses, and the focus had been to <em>compare</em> or <em>combine</em> models, instead of considering the focus on causality. Essentially, I wanted a more epidemiological approach. The <em>easystats</em> archetype of R “monsters” was partially the idea for the working name of <strong>{aims}</strong>. I started writing this after reading <a href="https://blog.simonpcouch.com/blog/dev-docs-p1/">this blogpost</a> on development of a package.</p>
</div>
<div id="on-names" class="section level1">
<h1 class="hasAnchor">
<a href="#on-names" class="anchor"></a>On Names</h1>
<p>The project name has gone through many iterations. The reason why the name was important is that the correct <em>metaphor</em> helps the planning process, providing a schema for understanding. <a href="https://en.wikipedia.org/wiki/Metaphors_We_Live_By">Metaphors We Live By</a> by Lakoff was fundamental in this understanding for me.</p>
<table class="table">
<colgroup>
<col width="50%">
<col width="50%">
</colgroup>
<thead><tr class="header">
<th>Project Name</th>
<th>Reasoning</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>{marksman}</td>
<td>The first draft included the concept of “specific aims”. This research concept is from grant writing, where the first page of a project contains the specific hypotheses that will be explored. Thus, one could <em>load</em>, <em>aim</em>, and <em>fire</em> and specific targets. The problem with this was it seemed to deterministic, as exploration was a crucial component.</td>
</tr>
<tr class="even">
<td>{octomod}</td>
<td>The second draft took inspiration from the idea of an <em>octopus</em>, with 8 arms or legs all surrounded a central idea. This allowed for flexibility in that the many arms of a project were not necessarily hierarchical. However, theming a project after a cephalopod does make the function names less easy to remember.</td>
</tr>
<tr class="odd">
<td>{aims}</td>
<td>Another consideration was to go back to the original concept of specific aims. Each project would be initialized, different study arms would be added, and then the corresponding models could be built. This seems more user-friendly in terms of nosological considerations.</td>
</tr>
<tr class="even">
<td>{diagnose}</td>
<td>After iterating through the code, modeling causality and looking at clinically relevant variables was the more refined underlying objective. This allowed for simplification of the hypothesis generating method and opened the door to look at effect modification.</td>
</tr>
<tr class="odd">
<td>{dagger}</td>
<td>Although “diagnosing” the relationships between terms was potentially interpretable, it seemed to pull away from the original idea of the multiple potential relationships. Returning to the drawing board, the concept of mapping out relationships, like a <strong>directed acyclic graph</strong>, was the most persistent concept.</td>
</tr>
</tbody>
</table>
</div>
<div id="defining-the-api" class="section level1">
<h1 class="hasAnchor">
<a href="#defining-the-api" class="anchor"></a>Defining the API</h1>
<div id="first-draft" class="section level2">
<h2 class="hasAnchor">
<a href="#first-draft" class="anchor"></a>First Draft</h2>
<p>I’ve currently defined the basic functions as below:</p>
<ul>
<li>
<code>octomod()</code> initializes the modeling structure</li>
<li>
<code>core()</code> defines the core data of the <code>octomod</code> structure, allowing tests to be performed from a centralized data set</li>
<li>
<code>arm()</code> creates individual arms to the <code>octomod</code>, which reference a specific family of hypotheses</li>
<li>
<code>equip()</code> gives each of the arms a <em>tidied</em> output including model fit and parameters, which can subsequently be called</li>
</ul>
<p>The benefits of this are I can flexibly change the core data, give specific formulas that can be expanded/varied, fit independently, and extracted in a list-column based format.</p>
<p>The problems are that “changing” the central dataset is dangerous, the structure doesn’t hold together afterwards, and fitting the data may break older models.</p>
</div>
<div id="second-draft" class="section level2">
<h2 class="hasAnchor">
<a href="#second-draft" class="anchor"></a>Second Draft</h2>
<div id="core-functions" class="section level3">
<h3 class="hasAnchor">
<a href="#core-functions" class="anchor"></a>Core Functions</h3>
<p>As described, the name helps to determine the function’s purpose. The core functions represent the major user-facing features. They also help to identify the underlying structure needed to store the data collected.</p>
<ul>
<li>
<code>project()</code> initializes a structure that holds and can retain information about the individual project aims or study arms</li>
<li>
<code>set_data()</code> attaches a specific data frame to the <code>project</code> object</li>
<li>
<code>add_arm()</code> creates a hypothesis-driven series of tests around a formula, and allows for multiple tests to be described simultaneously (e.g. sequential addition of covariates)</li>
<li>
<code>build_models()</code> runs the tests, whether it is basic statistics or more complex inferential models, with the capacity to update only the newly added arms</li>
<li>
<code>collect_findings()</code> recalls information from the <code>project</code> structure in a flexible way</li>
</ul>
</div>
<div id="project-structure" class="section level3">
<h3 class="hasAnchor">
<a href="#project-structure" class="anchor"></a>Project Structure</h3>
<p>The overall project structure requires a specific <em>class</em> that will contain a pattern of an internal structure. The <code>project</code> object should hold:</p>
<ul>
<li>a space to hold the data set</li>
<li>a <em>tidy</em> table that holds each <code>arm</code> as a separate row, containing columns for the title, formula combinations, modifiers/options, description, and build/run status</li>
<li>a corresponding <em>tidy</em> table that holds the results of each <code>arm</code> after it has been run</li>
</ul>
</div>
</div>
<div id="third-draft" class="section level2">
<h2 class="hasAnchor">
<a href="#third-draft" class="anchor"></a>Third Draft</h2>
<p>I realized this approach was not effective in that it was overly complicated in having multiple names, data frames, and connections between them. I simplified the pipeline to focus on a specific S3 classes that could be used to generate hypotheses, and iterate through to help look at variable relationship.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">study</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
    <span class="fu"><a href="../reference/add_hypothesis.html">add_hypothesis</a></span><span class="op">(</span><span class="va">hypothesis</span><span class="op">)</span> <span class="op">%&gt;%</span>
    <span class="fu">build_study</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>Essentially, this was a list based concept of adding hypotheses to a modified list/tibble structure that had important data stored as attributes.</p>
</div>
<div id="fourth-draft" class="section level2">
<h2 class="hasAnchor">
<a href="#fourth-draft" class="anchor"></a>Fourth Draft</h2>
<p>I decided that I was not really seeing the big picture. What I wanted was a way to store a set of multiple tests with the purpose of studying the relationship between two variables (an exposure and an outcome), and potentially looking at covariates. The <em>basic</em> concept was essentially a <strong>directed acyclic graph</strong>, with the relationships storing the hypotheses that were tested. The functionality was the same, but the API was different.</p>
<div id="classes" class="section level3">
<h3 class="hasAnchor">
<a href="#classes" class="anchor"></a>Classes</h3>
<p>The major classes needed would be …</p>
<ul>
<li>
<code>hypothesis</code> object, that showed and/or carried the relationship between variables, likely a complex formula object</li>
<li>
<code>map</code> object that drew the relationships between the variables, and allowed for the storage of multiple tests</li>
<li>
<code>path</code> object that is extracted after the map has been drawn (if you will), should be able to be evaluated to help understand which variables may be confounders, etc</li>
</ul>
</div>
<div id="confounding" class="section level3">
<h3 class="hasAnchor">
<a href="#confounding" class="anchor"></a>Confounding</h3>
<p>A purpose of having parallel and sequential model sets, built into a hypothesis, was to identify confounding variables and help remove them.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Anish Shah.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
