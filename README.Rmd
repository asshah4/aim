---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# rmdl

<!-- badges: start -->

[![Lifecycle: experimental](https://img.shields.io/badge/lifecycle-experimental-orange.svg)](https://www.tidyverse.org/lifecycle/#experimental) 
[![Github commit frequency](https://img.shields.io/github/commit-activity/w/asshah4/rmdl)](https://github.com/asshah4/rmdl/graphs/commit-activity) 
[![R-CMD-check](https://github.com/asshah4/rmdl/actions/workflows/R-CMD-check.yaml/badge.svg)](https://github.com/asshah4/rmdl/actions/workflows/R-CMD-check.yaml)

<!-- badges: end -->

## Installation

This package can be downloaded from CRAN or from [Github](https://github.com/asshah4/rmdl) as below

```{r, eval = FALSE}
# CRAN installation
install.packages("rmdl")
# Or remote/developmental version
remotes::install_github("asshah4/rmdl")
```

## Introduction

The package `rmdl` was intended as a way to handle causal- and epidemiology-based modeling by the following principles:

1. Role determination of variables
2. Generativity in formula creation
3. Multiple model management

## Usage

The package is simple to use. 
First, lets load the basic packages. 
The `mtcars` dataset will serve as the example, and we will use linear regressions as the primary test.

```{r}
library(rmdl)
```

There are several important extended classes that this package introduces, however they are primarily used for internal validation and for shortcuts to allow more effective communication.

- `<fmls>` are a *version* of the base `R` formula object, but contain additional information and have extra features
- `<tm>` are atomic elements used to describe individual variables, and departs from how terms are generally treated in the `{stats}` package
- `<mdl>` and `<mdl_tbl>` exist primarily as *tidy* versions of class regression modeling

We will see how they come together below. 
Next, we will evaluate a toy dataset and evaluate how a `<fmls>` object is generated.

```{r}
# Look at potential data from the `mtcars` dataset
head(mtcars)

baseFormula <- mpg ~ wt + hp
rmdlFormula <- fmls(mpg ~ wt + hp)

# Similar to the base formula
rmdlFormula
```

Now we can fit the hypothesis to its data - in this case, a simple linear regression.
The option to return the model as raw or not is given. 
If `TRUE`, the default, then the expected result from the modeling fit will be returned.
For our purposes though, we want to use the custom fit method, which retains more key information.

```{r}
# Uses a custom fit function 
rmdlModel <-
  rmdlFormula |>
  fit(.fn = lm, data = mtcars, raw = FALSE)

rmdlModel
```

## Advanced usage

The power of the `{rmdl}` package is partially in its flexibility with formulas. Please see the vignettes for further details on usage.